<canvas id="cnv" width="600" height="600"></canvas>
<script>
    const ctx = cnv.getContext('2d')

    const sets = []
    for (let i = 0; i < 4; ++i)
        sets.push(genSet())

    ctx.translate(cnv.width / 2, cnv.height / 2)
    let x = 0, y = 0
    function draw(ts) {
        for (let _ = 0; _ < 200; ++_) {
            const scale = 50
            ctx.fillRect(x * scale, y * scale, 1, 1)
            iterate()
        }
        requestAnimationFrame(draw)
    }
    requestAnimationFrame(draw)

    function iterate() {
        const r = Math.random()
        const i = Math.floor(r * sets.length)
        const a = sets[i][0]
        const b = sets[i][1]
        const c = sets[i][2]
        const d = sets[i][3]
        const e = sets[i][4]
        const f = sets[i][5]
        const nx = a * x + b * y + c
        const ny = d * x + e * y + f
        x = nx
        y = ny
    }

    function genSet() {
        const m = Math.random() * Math.PI * 2
        const n = Math.random() * Math.PI * 2
        const ra = Math.random()
        const rb = Math.random()

        const a = Math.sin(m) * ra
        const d = Math.cos(m) * ra
        const b = Math.sin(n) * rb
        const e = Math.cos(n) * rb
        const c = Math.random() * 2 - 1
        const f = Math.random() * 2 - 1

        //console.log(a, b, c, d, e, f)
        return [a, b, c, d, e, f]
    }
</script>